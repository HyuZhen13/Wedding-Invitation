<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pernikahan Fulanah & Husain</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&family=Playfair+Display:ital@0;1&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            /* Warna Utama: Hijau Emerald & Emas */
            --primary: #143d29;       /* Deep Green */
            --accent: #c5a059;        /* Gold */
            --accent-light: #e6c888;
            --text-dark: #333333;
            --bg-light: #f9fbf9;      /* Putih Kehijauan sangat muda */
            --white: #ffffff;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        html { scroll-behavior: smooth; }
        
        body {
            font-family: 'Poppins', sans-serif; /* FONT UTAMA POPPINS */
            color: var(--text-dark);
            background: var(--bg-light);
            overflow-x: hidden;
        }

        h1, h2, h3, h4, h5, h6 {
            font-family: 'Poppins', sans-serif;
            font-weight: 700;
        }

        /* --- 1. COVER PAGE (Pintu Masuk) --- */
        #cover {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: linear-gradient(rgba(20, 61, 41, 0.9), rgba(20, 61, 41, 0.8)), 
                        url('https://images.unsplash.com/photo-1515934751635-c81c6bc9a2d8?q=80&w=1920&auto=format&fit=crop') center/cover;
            z-index: 9999;
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            color: white; text-align: center;
            transition: transform 0.8s ease-in-out;
        }

        .btn-open {
            margin-top: 2rem;
            padding: 12px 40px;
            background: var(--accent);
            color: white;
            border: none;
            border-radius: 50px;
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 0 20px rgba(197, 160, 89, 0.6);
            animation: pulse 2s infinite;
            transition: 0.3s;
        }
        .btn-open:hover { background: #b08d45; transform: scale(1.05); }

        /* --- 2. MUSIC BUTTON --- */
        .music-box {
            position: fixed; bottom: 25px; right: 25px; z-index: 1000;
            width: 50px; height: 50px;
            background: var(--white);
            border: 2px solid var(--accent);
            color: var(--primary);
            border-radius: 50%;
            display: none; /* Muncul via JS */
            align-items: center; justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        }
        .spin { animation: spin 4s linear infinite; }

        /* --- 3. HERO SECTION (HIJAU KEREN) --- */
        .hero {
            height: 100vh;
            /* Background Hijau Keren */
            background: linear-gradient(180deg, rgba(20, 61, 41, 0.95) 0%, rgba(20, 61, 41, 0.7) 100%),
                        url('./bg.jpg') center/cover;
            color: var(--white);
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 0 20px;
            position: relative;
        }

        .hero-content h1 {
            font-size: 3.5rem;
            color: var(--accent);
            margin-bottom: 10px;
            text-shadow: 2px 2px 10px rgba(0,0,0,0.3);
        }
        
        .hero-content p {
            font-size: 1.2rem;
            letter-spacing: 2px;
            font-weight: 300;
        }

        /* Countdown */
        .countdown { display: flex; gap: 1rem; justify-content: center; margin-top: 3rem; flex-wrap: wrap; }
        .cd-box {
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255,255,255,0.2);
            padding: 15px;
            border-radius: 12px;
            min-width: 80px;
        }
        .cd-box span { font-size: 2rem; font-weight: 700; display: block; color: var(--accent); }
        .cd-box small { font-size: 0.8rem; text-transform: uppercase; }

        /* --- GLOBAL LAYOUT --- */
        section { padding: 5rem 1.5rem; }
        .container { max-width: 1000px; margin: 0 auto; }
        
        .section-title { text-align: center; margin-bottom: 4rem; }
        .section-title h2 { font-size: 2.5rem; color: var(--primary); margin-bottom: 0.5rem; }
        .section-title .divider { width: 80px; height: 3px; background: var(--accent); margin: 10px auto; }

        /* --- COUPLE --- */
        .couple-wrapper { display: flex; flex-wrap: wrap; gap: 2rem; justify-content: center; }
        .couple-card {
            flex: 1; min-width: 300px;
            text-align: center;
            background: white;
            padding: 3rem 2rem;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.05);
            border-bottom: 5px solid var(--primary);
        }
        .couple-img {
            width: 160px; height: 160px;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid var(--accent);
            padding: 5px;
            margin-bottom: 1.5rem;
        }

        /* --- EVENTS (Kartu) --- */
        .event-card {
            background: var(--white);
            border-radius: 15px;
            padding: 2rem;
            text-align: center;
            box-shadow: 0 5px 20px rgba(0,0,0,0.05);
            border: 1px solid #eee;
            margin-bottom: 1.5rem;
            transition: 0.3s;
        }
        .event-card:hover { transform: translateY(-5px); border-color: var(--accent); }
        .event-header { background: var(--primary); color: white; padding: 10px; border-radius: 8px; display: inline-block; margin-bottom: 1rem; width: 100%; }

        /* --- TIMELINE (Love Story) --- */
        .timeline { position: relative; max-width: 800px; margin: 0 auto; }
        .timeline::before { content: ''; position: absolute; left: 50%; top:0; height: 100%; width: 2px; background: var(--accent); transform: translateX(-50%); }
        .tl-item { margin-bottom: 30px; position: relative; width: 50%; padding: 0 30px; }
        .tl-item:nth-child(odd) { left: 0; text-align: right; }
        .tl-item:nth-child(even) { left: 50%; text-align: left; }
        .tl-content { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 5px 15px rgba(0,0,0,0.05); position: relative; }
        .tl-date { background: var(--primary); color: white; padding: 5px 15px; border-radius: 20px; font-size: 0.8rem; display: inline-block; margin-bottom: 10px; }

        /* --- GALLERY (Grid Style) --- */
        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
        }
        .gallery-item {
            position: relative;
            height: 220px;
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        .gallery-item img {
            width: 100%; height: 100%; object-fit: cover;
            transition: transform 0.5s ease;
        }
        .gallery-item:hover img { transform: scale(1.1); }

        /* --- GIFT (ATM Card) --- */
        .atm-card {
            background: linear-gradient(135deg, #143d29 0%, #1f5f3e 100%);
            color: #fff;
            padding: 2rem; border-radius: 15px;
            max-width: 400px; margin: 0 auto;
            position: relative; overflow: hidden;
            box-shadow: 0 15px 30px rgba(20, 61, 41, 0.3);
        }
        .atm-card::after { content:''; position: absolute; top:-50%; right: -50%; width: 300px; height: 300px; background: rgba(255,255,255,0.05); border-radius: 50%; }
        .chip { width: 50px; height: 35px; background: linear-gradient(135deg, #e6c888, #c5a059); border-radius: 6px; margin-bottom: 2rem; }
        .rek-text { font-family: monospace; font-size: 1.5rem; letter-spacing: 2px; display: block; margin-bottom: 1rem; }
        .btn-copy { background: transparent; border: 1px solid var(--accent); color: var(--accent); padding: 8px 20px; border-radius: 50px; cursor: pointer; transition: 0.3s; margin-top: 10px; }
        .btn-copy:hover { background: var(--accent); color: white; }

        /* --- RSVP FORM --- */
        .rsvp-form { background: white; padding: 2rem; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.05); max-width: 600px; margin: 0 auto; }
        .form-control { width: 100%; padding: 12px; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 8px; font-family: 'Poppins', sans-serif; }
        .btn-submit { width: 100%; padding: 12px; background: var(--primary); color: white; border: none; border-radius: 8px; font-weight: 600; cursor: pointer; transition: 0.3s; }
        .btn-submit:hover { background: #0f2e1f; }

        .chat-box { margin-top: 3rem; max-height: 400px; overflow-y: auto; padding: 10px; }
        .chat-bubble { background: white; padding: 15px; border-radius: 10px; margin-bottom: 10px; border-left: 4px solid var(--accent); box-shadow: 0 2px 5px rgba(0,0,0,0.05); }

        /* Modal */
        .modal { display: none; position: fixed; z-index: 2000; left: 0; top: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.9); justify-content: center; align-items: center; }
        .modal img { max-width: 90%; max-height: 90%; border-radius: 5px; border: 2px solid white; }
        .close { position: absolute; top: 20px; right: 30px; color: white; font-size: 40px; cursor: pointer; }

        /* Mobile Adjustments */
        @media (max-width: 768px) {
            .hero-content h1 { font-size: 2.5rem; }
            .timeline::before { left: 20px; }
            .tl-item { width: 100%; padding-left: 50px; padding-right: 0; text-align: left !important; }
            .tl-item:nth-child(even) { left: 0; }
        }

        /* Animations */
        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }
        @keyframes spin { 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>

    <audio id="bg-music" loop>
        <source src="./promise.mp3" type="audio/mpeg">
    </audio>

    <div class="music-box" id="musicBtn" onclick="toggleMusic()">
        <i class="fas fa-compact-disc spin"></i>
    </div>

    <div id="cover">
        <h2 style="font-weight: 300; letter-spacing: 2px; margin-bottom: 10px;">THE WEDDING OF</h2>
        <h1 style="font-size: 3rem; color: var(--accent); margin-bottom: 20px;">Fulanah & Husain</h1>
        <p>Kepada Yth. Bapak/Ibu/Saudara/i</p>
        <button class="btn-open" onclick="openInv()">
            <i class="fas fa-envelope-open"></i> BUKA UNDANGAN
        </button>
    </div>

    <main>
        <section id="home" class="hero">
            <div class="hero-content">
                <p>KAMI MENGUNDANG ANDA</p>
                <h1>Fulanah & Husain</h1>
                <p>Selasa, 15 Desember 2026</p>
                
                <div class="countdown">
                    <div class="cd-box"><span id="days">00</span><small>Hari</small></div>
                    <div class="cd-box"><span id="hours">00</span><small>Jam</small></div>
                    <div class="cd-box"><span id="minutes">00</span><small>Menit</small></div>
                    <div class="cd-box"><span id="seconds">00</span><small>Detik</small></div>
                </div>
            </div>
        </section>

        <section id="couple">
            <div class="container">
                <div class="section-title">
                    <h2>Mempelai</h2>
                    <div class="divider"></div>
                    <p>Maha Suci Allah yang telah menciptakan makhluk-Nya berpasang-pasangan.</p>
                </div>
                <div class="couple-wrapper">
                    <div class="couple-card">
                        <img src="https://picsum.photos/seed/bride1/300/300" class="couple-img" alt="Wanita">
                        <h3>Fulanah Hamba Allah</h3>
                        <p style="color: #777; font-size: 0.9rem;">Putri Bpk. Abdullah & Ibu Amatullah</p>
                    </div>
                    <div class="couple-card">
                        <img src="https://picsum.photos/seed/groom1/300/300" class="couple-img" alt="Pria">
                        <h3>Husain Abdullah</h3>
                        <p style="color: #777; font-size: 0.9rem;">Putra Bpk. Zahroni (Alm) & Ibu Hikmatul</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="event" style="background: white;">
            <div class="container">
                <div class="section-title">
                    <h2>Rangkaian Acara</h2>
                    <div class="divider"></div>
                </div>
                <div style="display: flex; flex-wrap: wrap; gap: 2rem; justify-content: center;">
                    <div class="event-card" style="flex: 1; min-width: 300px;">
                        <h3 class="event-header">Akad Nikah</h3>
                        <p><i class="far fa-clock" style="color: var(--primary);"></i> 08:00 WIB - Selesai</p>
                        <p><i class="far fa-calendar" style="color: var(--primary);"></i> Selasa, 15 Des 2026</p>
                        <br>
                        <p><strong>Masjid Namira</strong><br>Jl. Raya Mantup, Lamongan</p>
                        <a href="#" style="color: var(--accent); text-decoration: none; font-size: 0.9rem; margin-top: 10px; display: inline-block;">Lihat Lokasi <i class="fas fa-arrow-right"></i></a>
                    </div>
                    <div class="event-card" style="flex: 1; min-width: 300px;">
                        <h3 class="event-header">Resepsi</h3>
                        <p><i class="far fa-clock" style="color: var(--primary);"></i> 11:00 - 13:00 WIB</p>
                        <p><i class="far fa-calendar" style="color: var(--primary);"></i> Selasa, 15 Des 2026</p>
                        <br>
                        <p><strong>Grand Mahkota Hotel</strong><br>Ballroom Utama</p>
                        <a href="https://maps.google.com/?q=Masjid+Namira+Lamongan" target="_blank" rel="noopener" style="color: var(--accent); text-decoration: none; font-size: 0.9rem; margin-top: 10px; display: inline-block;">Lihat Lokasi <i class="fas fa-arrow-right"></i></a>
                    </div>
                </div>
            </div>
        </section>

        <section id="story">
            <div class="container">
                <div class="section-title">
                    <h2>Kisah Kami</h2>
                    <div class="divider"></div>
                </div>
                <div class="timeline">
                    <div class="tl-item">
                        <div class="tl-content">
                            <span class="tl-date">2025</span>
                           <h4>Pertemuan</h4>
                            <p style="font-size: 0.9rem;">Kami dipertemukan tanpa sengaja oleh Sang Pencipta.</p>
                        </div>
                    </div>
                    <div class="tl-item">
                        <div class="tl-content">
                            <span class="tl-date">2026</span>
                            <h4>Taaruf</h4>
                            <p style="font-size: 0.9rem;">Kami cukup saling memahami tanpa terlalu intens berkomunikasi.
                    </br>~</br>
                            Fulanah terlalu indah bagi Husain, sedangkan Husain terlalu kacau bagi Fulanah.
                    </br>~</br>
                            Namun Fulanah memaklumi semua itu dan kami tetap memilih untuk bersatu.</p>
                        </div>
                    </div>
                    <div class="tl-item">
                        <div class="tl-content">
                            <span class="tl-date">2026</span>
                            <h4>Khitbah</h4>
                            <p style="font-size: 0.9rem;">Husain memberanikan diri meminta izin kepada orang tua untuk melamar Fulanah. </br>~</br>
                           Sementara Fulanah sedang cengar-cengir menunggu dan sesekali juga menangis dengan syahdu.</p>
                        </div>
                    </div>
                    <div class="tl-item">
                        <div class="tl-content">
                            <span class="tl-date">2026</span>
                            <h4>Pernikahan</h4>
                            <p style="font-size: 0.9rem;">In syaa Allah dengan segenap hati, jiwa dan raga kami akan menyempurnakan separuh agama </br>~</br> 
                            seraya berkomitmen menebar keindahan di dunia, dan selalu berupaya agar bisa lebih indah dalam beribadah pada Sang Maha Kuasa .</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="gallery" style="background: white;">
            <div class="container">
                <div class="section-title">
                    <h2>Galeri Momen</h2>
                    <div class="divider"></div>
                </div>
                <div class="gallery-grid">
                    <div class="gallery-item" onclick="showModal(this.children[0].src)">
                        <img src="https://jalinjanji.com/storage/2024/06/quotes-pernikahan-islami_20240619_150132_0000-768x432.jpg" alt="Foto 1">
                    </div>
                    <div class="gallery-item" onclick="showModal(this.children[0].src)">
                        <img src="https://jalinjanji.com/storage/2024/06/quotes-pernikahan-islami_20240619_144609_0000.png" alt="Foto 2">
                    </div>
                    <div class="gallery-item" onclick="showModal(this.children[0].src)">
                        <img src="https://jalinjanji.com/storage/2024/06/quotes-pernikahan-islami_20240619_144825_0000.png" alt="Foto 3">
                    </div>
                    <div class="gallery-item" onclick="showModal(this.children[0].src)">
                        <img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTWnKUvIv8k0NZ9IwtbZWTPCw01jOvD5XFYuK1I3oF5JRHoXpZVyyhp6wg&s=10" alt="Foto 4">
                    </div>
                </div>
            </div>
        </section>

        <section id="gift">
            <div class="container">
                <div class="section-title">
                    <h2>Tanda Kasih</h2>
                    <p style="max-width: 600px; margin: 0 auto;">Doa restu Anda adalah hadiah terindah, namun jika ingin memberi tanda kasih, dapat melalui:</p>
                </div>
                <div class="atm-card">
                    <div class="chip"></div>
                    <span class="rek-text" id="rekNum">103 999 5766</span>
                    <div style="display: flex; justify-content: space-between; align-items: flex-end;">
                        <div>
                            <small>BANK SYARIAH INDONESIA</small><br>
                            <strong>HUSAIN ABDULLAH</strong>
                        </div>
                        <i class="fas fa-university" style="font-size: 2rem;"></i>
                    </div>
                    <center><button class="btn-copy" onclick="copyText()">Salin Nomor</button></center>
                </div>
            </div>
        </section>

        <section id="rsvp" style="background: white;">
            <div class="container">
                <div class="section-title">
                    <h2>Buku Tamu</h2>
                    <div class="divider"></div>
                </div>
                <form id="rsvpForm" class="rsvp-form">
                    <input type="text" id="name" class="form-control" placeholder="Nama Lengkap" required>
                    <select id="attendance" class="form-control" required>
                        <option value="">Konfirmasi Kehadiran</option>
                        <option value="hadir">Hadir</option>
                        <option value="tidak">Berhalangan</option>
                    </select>
                    <input type="number" id="guests" class="form-control" placeholder="Jumlah Tamu" min="1" max="5">
                    <textarea id="message" class="form-control" rows="3" placeholder="Doa Restu"></textarea>
                    <button type="submit" class="btn-submit" id="btnSubmit">Kirim Ucapan</button>
                </form>

                <div class="chat-box" id="chatList">
                    <p style="text-align: center; color: #999;">Memuat ucapan...</p>
                </div>
            </div>
        </section>

        <footer style="background: var(--primary); color: white; text-align: center; padding: 2rem;">
            <p>&copy; 2025 Fulanah & Husain.</p>
        </footer>
    </main>

    <div id="imgModal" class="modal">
        <span class="close" onclick="closeModal()">&times;</span>
        <img id="modalImg" src="">
    </div>

    <script>
        // 1. Musik & Cover
        const music = document.getElementById('bg-music');
        const btnMusic = document.getElementById('musicBtn');
        const iconMusic = btnMusic.querySelector('i');
        let isPlaying = false;

        function openInv() {
            document.getElementById('cover').style.transform = 'translateY(-100%)';
            music.play();
            isPlaying = true;
            btnMusic.style.display = 'flex';
        }

        function toggleMusic() {
            if(isPlaying) {
                music.pause();
                iconMusic.classList.remove('spin');
            } else {
                music.play();
                iconMusic.classList.add('spin');
            }
            isPlaying = !isPlaying;
        }

        // 2. Countdown
        const target = new Date('Dec 15, 2026 08:00:00').getTime();
        setInterval(() => {
            const now = new Date().getTime();
            const d = target - now;
            document.getElementById('days').innerText = Math.floor(d / (1000*60*60*24));
            document.getElementById('hours').innerText = Math.floor((d % (1000*60*60*24)) / (1000*60*60));
            document.getElementById('minutes').innerText = Math.floor((d % (1000*60*60)) / (1000*60));
            document.getElementById('seconds').innerText = Math.floor((d % (1000*60)) / 1000);
        }, 1000);

        // 3. Salin Rekening
        function copyText() {
            const rek = document.getElementById("rekNum").innerText;
            navigator.clipboard.writeText(rek);
            alert("Nomor rekening berhasil disalin!");
          }

        // 4. Modal Galeri
        function showModal(src) {
            document.getElementById('imgModal').style.display = 'flex';
            document.getElementById('modalImg').src = src;
        }
        function closeModal() {
            document.getElementById('imgModal').style.display = 'none';
        }
    </script>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getFirestore, collection, addDoc, query, orderBy, onSnapshot, serverTimestamp } 
            from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // Konfigurasi Database Anda
        const firebaseConfig = {
            apiKey: "AIzaSyCETypgyQ_Ik6QBYDojGevQtKLmfCidN6o",
            authDomain: "wedding-invt-1384b.firebaseapp.com",
            projectId: "wedding-invt-1384b",
            storageBucket: "wedding-invt-1384b.firebasestorage.app",
            messagingSenderId: "334299059159",
            appId: "1:334299059159:web:5cff80a2d51c861890f192",
            measurementId: "G-JVLPQGH6ZN"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // Kirim RSVP
        document.getElementById('rsvpForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            const btn = document.getElementById('btnSubmit');
            btn.innerHTML = "Mengirim..."; btn.disabled = true;

            try {
                await addDoc(collection(db, "rsvps"), {
                    nama: document.getElementById('name').value,
                    kehadiran: document.getElementById('attendance').value,
                    jumlah_tamu: document.getElementById('guests').value,
                    pesan: document.getElementById('message').value,
                    timestamp: serverTimestamp()
                });
                alert("Terima kasih atas doa restunya!");
                document.getElementById('rsvpForm').reset();
            } catch (err) {
                console.error(err);
                alert("Gagal mengirim.");
            } finally {
                btn.innerHTML = "Kirim Ucapan"; btn.disabled = false;
            }
        });

        // Load Chat Realtime
        const q = query(collection(db, "rsvps"), orderBy("timestamp", "desc"));
        onSnapshot(q, (snap) => {
            const list = document.getElementById('chatList');
            list.innerHTML = "";
            snap.forEach(doc => {
                const d = doc.data();
                const time = d.timestamp ? new Date(d.timestamp.seconds * 1000).toLocaleDateString() : "Baru saja";
                list.innerHTML += `
                    <div class="chat-bubble">
                        <div style="display:flex; justify-content:space-between; margin-bottom:5px;">
                            <strong style="color:var(--primary)">${d.nama}</strong>
                            <small style="color:#aaa">${time}</small>
                        </div>
                        <p>${d.pesan || "Mengirimkan doa."}</p>
                        <span style="font-size:0.7rem; color:${d.kehadiran=='hadir'?'green':'red'}">
                            ${d.kehadiran == 'hadir' ? '✔ Hadir' : '✖ Berhalangan'}
                        </span>
                    </div>`;
            });
        });
    </script>
</body>
</html>
